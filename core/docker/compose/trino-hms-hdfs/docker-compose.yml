#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

version: '3.8'
services:
  trino-coordinator:
    image: 'trinodb/trino:latest'
    hostname: trino-coordinator
    ports:
      - '8080:8080'
      - '9999:9999' # Debugger
      - '8888:8888' # Debugger
    environment:
      - TRINO_HOME=/usr/lib/trino
      - CATALOG_MANAGEMENT=static
    volumes:
      - ../:/usr/lib/trino
      - ./etc:/etc/trino
      - ./run-trino:/usr/lib/trino/run-trino
      - ./libjvmkill.so:/usr/lib/trino/bin/libjvmkill.so
      #      - ./trino-cli-437-SNAPSHOT-executable.jar:/usr/bin/trino/trino-cli-437-SNAPSHOT-executable.jar
      - ./conf/core-site.xml:/etc/hadoop/conf/core-site.xml
      - ./conf/hdfs-site.xml:/etc/hadoop/conf/hdfs-site.xml
    command: ["/usr/lib/trino/run-trino"]
    networks:
      - ranger-net

volumes:
  hdfs-data:
    driver: local

networks:
  ranger-net:
    name: rangernw
    external: true
